# React State: 컴포넌트의 기억력 만들기

Props가 부모에게서 물려받는 '유전자'라면, **State는 컴포넌트가 스스로 가지는 '기억' 또는 '상태**'입니다. 사용자의 행동(이벤트)에 따라 변해야 하는 값을 다룰 때 사용하며, React UI가 동적으로 변화하는 핵심 원리입니다.

전통적인 방식에서는 값이 바뀌면 개발자가 직접 HTML 요소를 찾아 화면을 변경해야 했지만, React에서는 **State 값만 바꾸면, React가 알아서 화면을 새롭게 렌더링**해 줍니다.

---

## **1. `useState` Hook: State 사용의 첫걸음**

React에서 State를 사용하려면, `useState`라는 특별한 함수, 즉 **Hook**을 사용해야 합니다.

```jsx
import { useState } from 'react';

function App() {
  const [num, setNum] = useState(1);
  // ...
}
```

React는 `useState`를 **딱 한 번, 맨 처음 렌더링될 때만 초기화**하고, 그 이후부터는 항상 **가장 마지막으로 업데이트된 상태값**을 기억하고 돌려줍니다.

### **`useState` 사용법 분석**

`const [num, setNum] = useState(1);` 이 한 줄에는 세 가지 중요한 정보가 담겨 있습니다.

1.  **`num` (상태 값)**: 컴포넌트가 기억할 '상태'입니다. `useState`의 인자로 전달한 초기값(`1`)으로 시작하며, **읽기 전용**입니다.
2.  **`setNum` (Setter 함수)**: `num` 상태를 변경할 때 사용하는 유일한 함수입니다. 이 함수를 호출하면 React에게 "상태가 바뀌었으니 화면을 다시 그려줘\!" 라고 알려주는 것과 같습니다. 그리고 아무것도 반환(return)하지 않습니다.(undefined 값 반환됨)
3.  **`useState(1)` (초기값)**: State가 가장 처음 가질 값입니다.

`useState`는 항상 `[상태값, Setter함수]` 형태의 배열을 반환하기 때문에, 위 코드처럼 **배열 구조 분해 할당** 문법으로 변수를 선언하는 것이 일반적입니다.

> **State의 황금률 💡**
>
> State는 `num = 3` 과 같이 직접 수정해서는 절대 안 됩니다. 반드시 `setNum(3)` 처럼 **Setter 함수를 통해서만 변경**해야 React가 변화를 감지하고 화면을 다시 렌더링합니다.

---

## **2. 실전: State를 활용한 동적인 주사위 만들기**

이제 `State`를 활용해 '던지기'와 '처음부터' 버튼이 있는 주사위 게임 기능을 만들어 보겠습니다.

### **Step 1: State 선언 및 `prop`으로 전달**

먼저 `App` 컴포넌트 안에 주사위 눈의 값을 기억할 `num`이라는 state를 선언하고, 이 값을 `Dice` 컴포넌트의 `num` prop으로 전달합니다.

```jsx
function App() {
  const [num, setNum] = useState(1);
  // ...
  return (
    // ...
    <Dice color="red" num={num} /> // state 값을 prop으로 전달
    // ...
  );
}
```

### **Step 2: '던지기' 기능 구현**

'던지기' 버튼을 클릭하면 `num` state를 1\~6 사이의 랜덤한 숫자로 변경하는 `handleRollClick` 함수를 만듭니다.

> **💡 팁**: 컴포넌트의 state나 props를 사용하지 않는 순수 함수는 렌더링마다 새로 만들어지는 것을 피하기 위해 컴포넌트 바깥에 두는 것이 좋습니다.

```jsx
function random(n) {
  return Math.floor(Math.random() * n) + 1;
}

function App() {
  const [num, setNum] = useState(1);

  const handleRollClick = () => {
    const nextNum = random(6);
    setNum(nextNum); // Setter 함수로 state 변경
  };
  // ...
  return (
    // ...
    <Button onClick={handleRollClick}>던지기</Button>
    // ...
  );
}
```

### **Step 3: '처음부터' 기능 구현**

'처음부터' 버튼을 클릭하면 `num` state를 다시 초기값 `1`로 되돌리는 `handleClearClick` 함수를 만듭니다.

```jsx
function App() {
  const [num, setNum] = useState(1);
  const handleRollClick = () => {
    /* ... */
  };

  const handleClearClick = () => {
    setNum(1); // Setter 함수로 state 변경
  };
  // ...
  return (
    // ...
    <Button onClick={handleClearClick}>처음부터</Button>
    // ...
  );
}
```

이제 모든 기능이 완성되었습니다. '던지기' 버튼을 누르면 `setNum`이 호출되어 `num` state가 바뀌고, React는 이 변화를 감지하여 `Dice` 컴포넌트를 새로운 `num` 값으로 다시 렌더링합니다. '처음부터' 버튼도 마찬가지 원리로 동작합니다.
