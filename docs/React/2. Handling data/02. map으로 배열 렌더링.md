## React 배열 렌더링의 핵심, `map` 메소드 파헤치기

React 컴포넌트 안에서 `mock.json`과 같은 배열 데이터를 화면에 목록 형태로 렌더링하는 방법을 알아보겠습니다. 이 작업의 핵심에는 JavaScript 배열 메소드인 **`map`** 이 있습니다.

### `map` 메소드란 무엇일까요? 🏭

`map` 메소드는 배열에 사용하는 기능으로, 마치 **'공장의 조립 라인'** 과 같습니다.

1.  **입력**: 원재료가 담긴 배열(예: `[재료A, 재료B, 재료C]`)이 조립 라인에 들어갑니다.
2.  **변환**: `map` 메소드는 각 재료를 하나씩 꺼내서, 우리가 정해준 **'설계도(콜백 함수)'** 에 따라 새로운 제품으로 변환합니다. (예: `재료A` -\> `제품A`)
3.  **출력**: 변환된 신제품들만 모아서 **새로운 배열**(`[제품A, 제품B, 제품C]`)을 만들어 반환합니다.

**핵심 특징:**

- 배열의 모든 요소를 처음부터 끝까지 순서대로 한 번씩 방문합니다.
- 각 요소를 **새로운 값이나 형태로 변환**하여 새로운 배열을 만듭니다.
- 원본 배열은 절대 건드리지 않고, 항상 **새로운 배열을 반환**합니다.

React에서는 이 `map` 메소드를 이용해 데이터 배열을 **JSX 요소(React Element) 배열**로 변환하여 화면에 렌더링합니다.

---

### `map`으로 배열 렌더링하기

`ReviewList` 컴포넌트에서 `items`라는 배열 데이터를 `map`을 이용해 렌더링해 보겠습니다. `<ul>` 태그 안에서 중괄호 `{}`를 열어 JavaScript 코드를 작성합니다.

**`src/components/ReviewList.jsx`**

```jsx
function ReviewList({ items }) {
  return (
    <ul>
      {items.map((item) => {
        // 배열의 각 'item'을 <li> 태그로 변환합니다.
        return <li>{item.title}</li>;
      })}
    </ul>
  );
}

export default ReviewList;
```

위 코드는 `items` 배열의 각 영화 객체(`item`)를 순회하면서, 각 객체의 `title`을 `<li>` 태그에 담아 새로운 `<li>` 태그 배열을 만듭니다. React는 이 JSX 요소 배열을 받아 화면에 목록을 그려줍니다.

### `ReviewListItem` 컴포넌트로 분리하기

이제 각 목록 아이템을 별도의 컴포넌트로 만들어 코드를 더 깔끔하고 체계적으로 관리해 보겠습니다.

`formatDate`와 같은 헬퍼 함수를 추가하고, `ReviewListItem`이라는 새 컴포넌트를 만들어 각 아이템의 상세 정보를 표시하도록 합니다.

**`src/components/ReviewList.jsx`**

```jsx
import './ReviewList.css';

// 날짜 형식을 'YYYY. MM. DD'로 변환하는 함수
function formatDate(value) {
  const date = new Date(value);
  return `${date.getFullYear()}. ${date.getMonth() + 1}. ${date.getDate()}`;
}

// 각 리뷰 아이템을 렌더링하는 컴포넌트
function ReviewListItem({ item }) {
  return (
    <div className="ReviewListItem">
      <img className="ReviewListItem-img" src={item.imgUrl} alt={item.title} />
      <div>
        <h1>{item.title}</h1>
        <p>평점: {item.rating}</p>
        <p>{formatDate(item.createdAt)}</p>
        <p>{item.content}</p>
      </div>
    </div>
  );
}

// 전체 리뷰 목록을 렌더링하는 컴포넌트
function ReviewList({ items }) {
  return (
    <ul>
      {items.map((item) => {
        return (
          <li key={item.id}>
            {' '}
            {/* 👈 key prop 추가 (아래 설명 참조) */}
            <ReviewListItem item={item} />
          </li>
        );
      })}
    </ul>
  );
}

export default ReviewList;
```

여기에 간단한 CSS를 입혀주면 더 보기 좋은 목록이 완성됩니다.

**`src/components/ReviewList.css`**

```css
.ReviewListItem {
  display: flex;
  padding: 10px;
  align-items: center;
  border-bottom: 1px solid #eee;
}

.ReviewListItem-img {
  width: 160px;
  margin-right: 20px;
}
```

> **⚠️ 중요: `key` prop을 잊지 마세요\!** > `map`을 사용하여 목록을 렌더링할 때는, 각 목록 아이템에 **고유한 `key` prop**을 반드시 지정해야 합니다. React는 이 `key`를 사용하여 어떤 항목이 변경, 추가 또는 삭제되었는지 식별하고 효율적으로 화면을 업데이트합니다. 보통 데이터의 `id` 값을 `key`로 사용합니다.

`map` 메소드를 활용하면 어떤 형태의 데이터든 손쉽게 동적인 목록으로 만들 수 있습니다. 많은 데이터를 보여주는 웹 페이지를 만들 때 꼭 필요한 핵심 기술이니 잘 기억해두세요\!

더 자세한 `map` 메소드의 기능은 아래 MDN 문서를 참고하는 것도 좋습니다.

- **참고**: [MDN - Array.prototype.map()](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/map)
