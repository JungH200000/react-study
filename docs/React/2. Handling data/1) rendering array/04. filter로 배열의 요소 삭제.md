## React 목록 아이템 삭제하기 (filter 메소드)

리뷰 목록에서 '삭제' 버튼을 누르면 해당 아이템이 사라지는 기능을 만들어 보겠습니다. 이 기능의 핵심에는 JavaScript 배열 메소드인 **`filter`** 가 있습니다.

### `filter` 메소드란 무엇일까요? 🛂

`filter` 메소드는 이름 그대로 배열의 요소들을 **'거름망'** 에 거르는 것과 같은 역할을 합니다.

1.  **입력**: 필터링할 아이템이 담긴 배열이 들어옵니다.
2.  **조건 확인**: `filter` 메소드는 각 아이템을 하나씩 꺼내서, 우리가 정해준 **'통과 조건(콜백 함수)'** 을 만족하는지 검사합니다.
3.  **출력**: 이 조건을 통과한(`true`를 반환한) 아이템들만 모아서 **새로운 배열**을 만들어 반환합니다.

**핵심 특징:**

- `map`처럼 원본 배열을 절대 수정하지 않고, 항상 **새로운 배열을 반환**합니다.
- 콜백 함수는 반드시 `true` 또는 `false`를 반환해야 합니다.
- React에서는 이 `filter`를 사용하여, 특정 조건(예: '삭제할 아이디와 같지 않은')을 만족하는 아이템들만 남겨서 state를 업데이트합니다.

**예시**

```jsx
const handleDelete = (id) => {
  // 👇 인자로 받은 id와 다른 id를 가진 아이템들만 남깁니다.
  const nextItems = items.filter((item) => item.id !== id);
  setItems(nextItems);
};
```

`filter` 메소드는 `(item) => item.id !== id` 라는 '임시 함수'를 인자로 받아서, 배열의 모든 `item`에 대해 이 함수를 한 번씩 실행합니다. 그리고 그 결과가 `true`인 `item`만 모아서 새로운 배열을 만들어 주는 것이죠.

---

### `filter`로 아이템 삭제 기능 구현하기

이제 `filter` 메소드를 활용하여 `items` 배열에서 특정 `id`를 가진 아이템을 삭제하는 기능을 구현해 보겠습니다.

#### 1\. `App` 컴포넌트에 `items` state와 `handleDelete` 함수 추가

`mockItems`를 초기값으로 하는 `items` state를 만듭니다. 그리고 `handleDelete` 함수에서는 `id`를 받아와, 해당 `id`와 일치하지 않는 아이템들만 `filter`로 걸러내 새로운 배열을 만든 뒤 `setItems`로 state를 업데이트합니다.

**`src/App.jsx`**

```jsx
import { useState } from 'react';
import ReviewList from './components/ReviewList';
import mockItems from './mock.json';

function App() {
  const [items, setItems] = useState(mockItems); // 👈 mockItems를 state로 관리
  const [order, setOrder] = useState('createdAt');

  // 👇 state로 관리하는 items를 정렬해야 합니다.
  const sortedItems = [...items].sort((a, b) => b[order] - a[order]);

  const handleNewestClick = () => setOrder('createdAt');
  const handleBestClick = () => setOrder('rating');

  const handleDelete = (id) => {
    // 👇 인자로 받은 id와 다른 id를 가진 아이템들만 남깁니다.
    const nextItems = items.filter((item) => item.id !== id);
    setItems(nextItems);
  };

  return (
    <div>
      <div>
        <button onClick={handleNewestClick}>최신순</button>
        <button onClick={handleBestClick}>베스트순</button>
      </div>
      {/* 👇 정렬된 아이템과 삭제 함수를 props로 전달합니다. */}
      <ReviewList items={sortedItems} onDelete={handleDelete} />
    </div>
  );
}

export default App;
```

> **⚠️ 중요:**
>
> - `useState`를 사용해 `items`를 상태로 관리해야 삭제 기능이 정상적으로 동작합니다.
> - 정렬을 할 때도 원본 `mockItems`가 아닌, 현재 상태인 `items` 배열을 복사해서 정렬해야 합니다.

#### 2\. `ReviewList`와 `ReviewListItem`에 `onDelete` 함수 연결

`App`에서 만든 `handleDelete` 함수를 `onDelete`라는 이름의 prop으로 자식 컴포넌트까지 전달하고, '삭제' 버튼의 `onClick` 이벤트에 연결합니다.

**`src/components/ReviewList.jsx`**

```jsx
import './ReviewList.css';

function formatDate(value) {
  const date = new Date(value);
  return `${date.getFullYear()}. ${date.getMonth() + 1}. ${date.getDate()}`;
}

// 각 리뷰 아이템 컴포넌트
function ReviewListItem({ item, onDelete }) {
  // '삭제' 버튼 클릭 시 onDelete 함수를 item.id와 함께 호출
  const handleDeleteClick = () => onDelete(item.id);

  return (
    <div className="ReviewListItem">
      <img className="ReviewListItem-img" src={item.imgUrl} alt={item.title} />
      <div>
        <h1>{item.title}</h1>
        <p>평점: {item.rating}</p>
        <p>{formatDate(item.createdAt)}</p>
        <p>{item.content}</p>
        <button onClick={handleDeleteClick}>삭제</button>
      </div>
    </div>
  );
}

// 전체 리뷰 목록 컴포넌트
function ReviewList({ items, onDelete }) {
  return (
    <ul>
      {items.map((item) => {
        return (
          <li key={item.id}>
            <ReviewListItem item={item} onDelete={onDelete} />
          </li>
        );
      })}
    </ul>
  );
}

export default ReviewList;
```

이제 '삭제' 버튼을 누르면, `handleDeleteClick`이 `item.id`를 가지고 `App`의 `handleDelete` 함수를 호출합니다. `handleDelete`는 해당 `id`를 제외한 새로운 배열을 만들어 `items` state를 업데이트하고, React는 변경된 `items` state에 맞춰 화면을 다시 렌더링하여 아이템이 사라지는 것을 보여줍니다.
