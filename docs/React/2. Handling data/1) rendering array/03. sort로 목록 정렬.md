## React에서 목록 정렬 기능 구현하기 (sort 메소드)

'최신순'이나 '베스트순'처럼, 사용자가 원하는 기준에 따라 데이터 목록을 정렬하는 기능을 만들어 보겠습니다. 이 기능의 핵심에는 JavaScript 배열 메소드인 **`sort`** 가 있습니다.

### JavaScript `sort` 메소드 깊이 알기 ⚖️

`sort` 메소드는 이름 그대로 배열의 요소들을 정렬하는 역할을 합니다. 하지만 어떻게 정렬할지는 우리가 직접 알려줘야 합니다.

`sort` 메소드는 마치 **'심판'** 과 같습니다.

1.  **비교 대상 선정**: `sort`는 배열에서 두 개의 요소(`a`와 `b`)를 뽑아 심판(비교 함수)에게 보냅니다.
2.  **판정 내리기**: 심판(비교 함수)은 `a`와 `b`를 비교해서 누가 더 앞에 와야 할지 판정하고 그 결과를 숫자로 알려줘야 합니다.
    - **`음수` 리턴**: `a`가 `b`보다 앞에 와야 한다.
    - **`양수` 리턴**: `b`가 `a`보다 앞에 와야 한다.
    - **`0` 리턴**: 순서를 바꾸지 않는다.

우리의 리뷰 데이터를 `rating`(별점)이 높은 순으로 정렬(내림차순)하고 싶다고 해봅시다.

```javascript
// b의 별점이 a의 별점보다 크면 양수가 리턴되어 b가 앞으로 갑니다.
items.sort((a, b) => b.rating - a.rating);
```

만약 `b.rating`이 5이고 `a.rating`이 3이라면, `5 - 3 = 2`(양수)가 되어 `b`가 `a`보다 앞 순서로 정렬됩니다.

반대로 별점이 낮은 순(오름차순)으로 정렬하고 싶다면 `a.rating - b.rating`을 사용하면 됩니다.

---

### ⚠️ React와 `sort`: 원본 배열을 바꾸는 위험성

`sort` 메소드에는 아주 중요한 특징이 있습니다. 바로 **'원본 배열 자체를 수정한다'** 는 점입니다. React에서는 `props`로 받은 데이터나 `state`를 직접 수정하는 것을 **엄격하게 금지**하고 있습니다. 이는 예측 불가능한 렌더링 문제를 일으킬 수 있기 때문입니다.

따라서 `sort`를 사용하기 전에는, 반드시 **배열을 복사**하여 그 복사본을 정렬해야 합니다. 가장 쉬운 방법은 **스프레드 문법(`...`)** 을 사용하는 것입니다.

```jsx
const sortedItems = [...items].sort((a, b) => b.rating - a.rating);
```

이렇게 하면 원본 `items` 배열은 그대로 유지하면서, 정렬된 새로운 배열을 안전하게 만들 수 있습니다.

---

### React에 정렬 기능 구현하기

이제 `useState`를 활용하여 사용자가 정렬 기준을 직접 선택할 수 있는 기능을 만들어 보겠습니다.

#### 1\. 동적인 정렬 기준 만들기 (`useState`)

`useState`로 정렬 기준(`order`)을 관리하고, 이 `order` 값에 따라 동적으로 정렬을 수행합니다.

`src/App.jsx`

```jsx
import { useState } from 'react';
import ReviewList from './components/ReviewList';
import items from './mock.json';

function App() {
  // 'createdAt'(최신순)을 기본 정렬 기준으로 설정
  const [order, setOrder] = useState('createdAt');

  // 원본 배열을 복사한 후, order state에 따라 동적으로 정렬
  const sortedItems = [...items].sort((a, b) => b[order] - a[order]);

  return (
    <div>
      <ReviewList items={sortedItems} />
    </div>
  );
}

export default App;
```

위 코드에서 `b[order] - a[order]` 부분은 `order` state 값이 'rating'이면 `b.rating - a.rating`으로, 'createdAt'이면 `b.createdAt - a.createdAt`으로 동작하게 하는 아주 유용한 패턴입니다.

#### 2\. 정렬 버튼 추가하기 👆

이제 사용자가 `order` state를 직접 바꿀 수 있는 버튼들을 추가합니다.

`src/App.jsx`

```jsx
import { useState } from 'react';
import ReviewList from './components/ReviewList';
import items from './mock.json';

function App() {
  const [order, setOrder] = useState('createdAt');
  const sortedItems = [...items].sort((a, b) => b[order] - a[order]);

  // 버튼 클릭 시 order state를 변경하는 핸들러 함수
  const handleNewestClick = () => setOrder('createdAt');
  const handleBestClick = () => setOrder('rating');

  return (
    <div>
      <div>
        <button onClick={handleNewestClick}>최신순</button>
        <button onClick={handleBestClick}>베스트순</button>
      </div>
      <ReviewList items={sortedItems} />
    </div>
  );
}

export default App;
```

이제 각 버튼을 클릭하면 `order` state가 변경되고, 그에 따라 `sortedItems` 배열이 새롭게 정렬되어 화면이 다시 렌더링됩니다. 이것으로 동적인 정렬 기능이 완성되었습니다\!
